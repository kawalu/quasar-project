import{j as A,c as h,h as L,k as D,r as N,u as $,s as R,l as F,m as t,n as a,p as o,d as l,Q as _,q as Q,t as b,v as r,x as d,y as i,z as w,A as C,B as H,F as B,C as M,D as U}from"./index.189f56a6.js";import{Q as j,a as E,b as q,c as S,d as s,e as O,f as P,g as G,h as J,_ as K}from"./logo.ded464bd.js";import{Q as z,a as k}from"./use-prevent-scroll.61a3d5f0.js";import{u as W}from"./use-quasar.94f38d34.js";import"./uid.42677368.js";import"./use-dark.f7383381.js";import"./format.a33550d6.js";import"./touch.3df10340.js";import"./selection.0cc9fb9c.js";const X=["top","middle","bottom"];var Y=A({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:n=>X.includes(n)}},setup(n,{slots:c}){const m=h(()=>n.align!==void 0?{verticalAlign:n.align}:null),g=h(()=>{const f=n.outline===!0&&n.color||n.textColor;return`q-badge flex inline items-center no-wrap q-badge--${n.multiLine===!0?"multi":"single"}-line`+(n.outline===!0?" q-badge--outline":n.color!==void 0?` bg-${n.color}`:"")+(f!==void 0?` text-${f}`:"")+(n.floating===!0?" q-badge--floating":"")+(n.rounded===!0?" q-badge--rounded":"")+(n.transparent===!0?" q-badge--transparent":"")});return()=>L("div",{class:g.value,style:m.value,role:"status","aria-label":n.label},D(c.default,n.label!==void 0?[n.label]:[]))}});const Z=w("img",{src:K},null,-1),I=["src"],ee={class:"q-pa-sm"},de={__name:"MainLayout",setup(n){const c=N(!1),m=W(),g=$(),f=()=>{c.value=!c.value},{isLogin:e,isAdmin:x}=R(g),V=h(()=>[{to:"/explorekawa",text:"\u63A2\u7D22kawa",icon:"home",show:e},{to:"/introbike",text:"\u8ECA\u6B3E\u4ECB\u7D39",icon:"electric_moped",show:e},{to:"/newcenter",text:"\u8ECA\u8F1B\u6BD4\u8F03",icon:"feed",show:e},{to:"/donetkawa",text:"\u6597\u5167kawa",icon:"paid",show:e},{to:"/admin",text:"\u7BA1\u7406",icon:"settings",show:e&&x},{to:"/register",text:"\u8A3B\u518A",icon:"",show:!e},{to:"/login",text:"\u767B\u5165",icon:"",show:!e}]),y=async()=>{try{await U.delete("/users/logout"),g.logout(),m.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u767B\u51FA\u6210\u529F"})}catch{m.notify({color:"red-5",textColor:"white",icon:"warning",message:"\u767B\u51FA\u5931\u6557"})}};return(v,p)=>{const T=F("router-view");return t(),a(j,{view:"hHh lpR fFf"},{default:o(()=>[l(O,{elevated:"",class:"bg-dark text-white","height-hint":"98"},{default:o(()=>[l(E,null,{default:o(()=>[l(q,{to:"/"},{default:o(()=>[l(q,{style:{color:"#fff","text-decoration":"none"}},{default:o(()=>[l(_,{round:"",to:"/"},{default:o(()=>[l(Q,{size:"xl"},{default:o(()=>[Z]),_:1}),b(" kawa\u91CD\u6A5F ")]),_:1})]),_:1})]),_:1}),l(S,{align:"right",class:"gt-xs"},{default:o(()=>[r(e)?(t(),a(d,{key:0,name:"home",size:"30px"})):i("",!0),r(e)?(t(),a(s,{key:1,to:"/",label:"\u56DE\u9996\u9801"})):i("",!0),r(e)?(t(),a(d,{key:2,name:"public",size:"30px"})):i("",!0),r(e)?(t(),a(s,{key:3,to:"/explorekawa",label:"\u63A2\u7D22kawa"})):i("",!0),r(e)?(t(),a(d,{key:4,name:"electric_moped",size:"30px"})):i("",!0),r(e)?(t(),a(s,{key:5,to:"/introbike",label:"\u8ECA\u6B3E\u4ECB\u7D39"})):i("",!0),r(e)?(t(),a(d,{key:6,name:"feed",size:"30px"})):i("",!0),r(e)?(t(),a(s,{key:7,to:"/newcenter",label:"\u8ECA\u6B3E\u6BD4\u8F03"})):i("",!0),r(e)?(t(),a(d,{key:8,name:"paid",size:"30px"})):i("",!0),r(e)?(t(),a(s,{key:9,to:"/donetkawa",label:"\u6597\u5167kawa"})):i("",!0),r(e)?i("",!0):(t(),a(s,{key:10,to:"/register",label:"\u8A3B\u518A"})),r(e)?(t(),a(d,{key:11,name:"settings",size:"30px"})):i("",!0),r(e)&&r(x)?(t(),a(s,{key:12,to:"/admin",label:"\u7BA1\u7406"})):i("",!0),r(e)?i("",!0):(t(),a(s,{key:13,to:"/login",label:"\u767B\u5165"})),r(e)?(t(),a(s,{key:14,label:"\u767B\u51FA",onClick:y})):i("",!0),l(_,{dense:"",round:"",flat:"",icon:"favorite",color:"red",to:"/like"},{default:o(()=>[l(Y,{color:"red",floating:"",transparent:"",label:r(g).like},null,8,["label"])]),_:1})]),_:1}),l(S,{align:"right",class:"gt-xs"},{default:o(()=>[r(e)?(t(),a(s,{key:0,to:"/"},{default:o(()=>[l(Q,null,{default:o(()=>[w("img",{src:r(g).avatar},null,8,I)]),_:1})]),_:1})):i("",!0)]),_:1}),l(_,{dense:"",flat:"",round:"",icon:"menu",onClick:f,class:"lt-sm"})]),_:1})]),_:1}),l(G,{modelValue:c.value,"onUpdate:modelValue":p[0]||(p[0]=u=>c.value=u),side:"right",bordered:"",elevated:""},{default:o(()=>[l(P,{class:"fit"},{default:o(()=>[w("div",ee,[(t(!0),C(B,null,H(V.value,u=>(t(),C(B,null,[u.show?(t(),a(z,{key:u.to,clickable:u.show,to:u.to},{default:o(()=>[l(k,{avatar:""},{default:o(()=>[l(d,{name:u.icon},null,8,["name"])]),_:2},1024),l(k,null,{default:o(()=>[b(M(u.text),1)]),_:2},1024)]),_:2},1032,["clickable","to"])):i("",!0)],64))),256)),r(e)?(t(),a(z,{key:0,clickable:"",onClick:y},{default:o(()=>[l(k,{avatar:""}),l(k,null,{default:o(()=>[b(" \u767B\u51FA ")]),_:1})]),_:1})):i("",!0)])]),_:1})]),_:1},8,["modelValue"]),l(J,null,{default:o(()=>[(t(),a(T,{key:v.$route.path}))]),_:1})]),_:1})}}};export{de as default};
