import{ar as le,r as o,l as j,m as E,A as ae,z as i,d as n,Q as I,p as d,F as ne,D as z,x as K,n as oe,y as te,C as ue,t as O,av as de,aw as se}from"./index.ce61692c.js";import{a as t,Q as re}from"./QForm.ee137b8f.js";import{Q as ie}from"./QImg.c6384165.js";import{Q as me,a as W,b as pe}from"./QTable.b2692d0a.js";import{b as ve,Q as fe}from"./QSelect.a88ac515.js";import{Q as ge}from"./QCardSection.68ba9bc2.js";import{Q as ce}from"./QCard.5c4f5fc4.js";import{u as Ve}from"./use-quasar.5ec6d70e.js";import"./use-key-composition.7452c6bb.js";import"./use-dark.f8faf220.js";import"./uid.42677368.js";import"./use-form.23524149.js";import"./use-prevent-scroll.c6ebd2ea.js";import"./use-fullscreen.443bfe3b.js";import"./selection.3d3c473c.js";import"./format.a33550d6.js";const be=F=>(de("data-v-528a7aee"),F=F(),se(),F),ye=be(()=>i("div",null,[i("h1",null,"\u7BA1\u7406\u91CD\u6A5F")],-1)),xe={class:"q-pa-md q-gutter-sm"},we={style:{"text-align":"center"}},Se={style:{"text-align":"center"}},ke={__name:"BikeManagement",setup(F){const D=Ve(),M=o(""),m=o(null),Y=["YAMAHA","HONDA","KAWASAKI"],p=o(!1),s=o(!1),u=o(!1),v=o(""),f=o(""),g=o(""),c=o(""),V=o(""),b=o(""),y=o(""),x=o(""),w=o(""),S=o(""),k=o(""),U=o(""),Q=o(""),B=o(""),T=o(""),C=o(""),r=o(!1),A=o([]),_=o([]),N=o(null),$=()=>{v.value="",f.value="",g.value="",m.value="",c.value="",V.value="",b.value="",y.value="",x.value="",w.value="",S.value="",k.value="",U.value="",Q.value="",B.value="",T.value="",C.value="",p.value=!1},G=()=>{s.value=!1,$(),N.value.deleteFileRecord()},J=[{name:"name",required:!0,label:"\u540D\u7A31",align:"center",field:"name"},{name:"image",align:"center",label:"\u5716\u7247",field:"image",sortable:!0},{name:"model",align:"center",label:"\u578B\u865F",field:"model",sortable:!0},{name:"engineform",align:"center",label:"\u5F15\u64CE\u5F62\u5F0F",field:"engineform"},{name:"dimensions",align:"center",label:"\u8ECA\u9577\xD7\u8ECA\u5BEC\xD7\u8ECA\u9AD8",field:"dimensions"},{name:"seatHeight",align:"center",label:"\u5EA7\u9AD8",field:"seatHeight"},{name:"weight",align:"center",label:"\u8ECA\u91CD",field:"weight"},{name:"displacement",align:"center",label:"\u7E3D\u6392\u6C23\u91CF",field:"displacement"},{name:"maxHorsepower",align:"center",label:"\u6700\u9AD8\u99AC\u529B",field:"maxHorsepower"},{name:"maxTorque",align:"center",label:"\u6700\u5927\u626D\u529B",field:"maxTorque"},{name:"frontSuspension",align:"center",label:"\u524D\u61F8\u540A\u7CFB\u7D71",field:"frontSuspension"},{name:"rearSuspension",align:"center",label:"\u5F8C\u61F8\u540A\u7CFB\u7D71",field:"rearSuspension"},{name:"frontTire",align:"center",label:"\u8F2A\u80CE(\u524D)",field:"frontTire"},{name:"rearTire",align:"center",label:"\u8F2A\u80CE(\u5F8C)",field:"rearTire"},{name:"frontBrakeSystem",align:"center",label:"\u524D\u715E\u8ECA\u7CFB\u7D71",field:"frontBrakeSystem"},{name:"rearBrakeSystem",align:"center",label:"\u5F8C\u715E\u8ECA\u7CFB\u7D71",field:"rearBrakeSystem"},{name:"description",align:"center",label:"\u8AAA\u660E",field:"description"},{name:"category",align:"center",label:"\u5206\u985E",field:"category"},{name:"sell",align:"center",label:"\u4E0A\u67B6",field:"sell"},{name:"edit",align:"center",label:"\u7DE8\u8F2F",field:"calcium",sortable:!1},{name:"delete",align:"center",label:"\u522A\u9664",field:"iron",sortable:!1}],R=o([]),H=o(""),L=l=>{H.value=l._id,v.value=l.name,f.value=l.model,g.value=l.description,m.value=l.category,p.value=l.sell,c.value=l.engineform,V.value=l.dimensions,b.value=l.seatHeight,y.value=l.weight,x.value=l.displacement,w.value=l.maxHorsepower,S.value=l.maxTorque,k.value=l.frontSuspension,U.value=l.rearSuspension,Q.value=l.frontTire,B.value=l.rearTire,T.value=l.frontBrakeSystem,C.value=l.rearBrakeSystem,s.value=!0},q=async()=>{r.value=!0;try{const{data:l}=await z.get("/products/all");R.value=l.result.data,r.value=!1}catch(l){console.log(l)}};q();const P=async l=>{await z.delete(`/products/${l}`),q()},X=async()=>{if(r.value=!0,!(H.value.length===0&&A.value.length===0))try{const l=new FormData;l.append("name",v.value),l.append("model",f.value),l.append("description",g.value),l.append("category",m.value),l.append("sell",p.value),l.append("engineform",c.value),l.append("dimensions",V.value),l.append("seatHeight",b.value),l.append("weight",y.value),l.append("displacement",x.value),l.append("maxHorsepower",w.value),l.append("maxTorque",S.value),l.append("frontSuspension",k.value),l.append("rearSuspension",U.value),l.append("frontTire",Q.value),l.append("rearTire",B.value),l.append("frontBrakeSystem",T.value),l.append("rearBrakeSystem",C.value),A.value.length>0&&l.append("image",A.value[0].file),H.value.length>0?(await z.patch("/products/"+H.value,l),D.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u4FEE\u6539\u6210\u529F"}),s.value=!1,r.value=!1,q()):(await z.post("/products",l),D.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u65B0\u589E\u6210\u529F"}),q(),s.value=!1,$(),N.value.deleteFileRecord(),r.value=!1)}catch(l){console.log(l),D.notify({color:"red-5",textColor:"white",icon:"warning",message:"\u4E0A\u50B3\u5931\u6557"})}};return(l,a)=>{const Z=j("VueFileAgent"),h=j("router-view");return E(),ae(ne,null,[ye,i("div",xe,[n(I,{label:"\u65B0\u589E",color:"green",onClick:a[0]||(a[0]=e=>s.value=!0)}),n(me,{title:"\u7BA1\u7406\u8CC7\u6599",class:"my-sticky-column-table",rows:R.value,columns:J,"row-key":"_id",loading:r.value,filter:M.value},{"top-right":d(()=>[n(t,{borderless:"",dense:"",debounce:"300",modelValue:M.value,"onUpdate:modelValue":a[1]||(a[1]=e=>M.value=e),placeholder:"Search"},{append:d(()=>[n(K,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-image":d(e=>[i("div",we,[n(ie,{src:e.row.image,width:"100px"},null,8,["src"])])]),"body-cell-sell":d(e=>[i("div",Se,[e.row.sell?(E(),oe(K,{key:0,name:"check",size:"30px"})):te("",!0)])]),"body-cell-edit":d(e=>[n(W,{props:e},{default:d(()=>[n(I,{color:"primary",icon:"edit",onClick:ee=>L(e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),"body-cell-delete":d(e=>[n(W,{props:e},{default:d(()=>[n(I,{color:"red",icon:"delete",onClick:ee=>P(e.row._id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","loading","filter"])]),n(ve,{modelValue:s.value,"onUpdate:modelValue":a[22]||(a[22]=e=>s.value=e)},{default:d(()=>[n(ce,{class:"my-card",style:{width:"500px"}},{default:d(()=>[i("h6",null,ue(H.value.length>0?"\u7DE8\u8F2F":"\u65B0\u589E"),1),n(re,{onSubmit:X},{default:d(()=>[n(t,{filled:"",type:"text",modelValue:v.value,"onUpdate:modelValue":a[2]||(a[2]=e=>v.value=e),dense:u.value,label:"\u540D\u7A31","lazy-rules":"",rules:[e=>!!e||"\u8ACB\u8F38\u5165\u540D\u7A31"]},null,8,["modelValue","dense","rules"]),n(t,{filled:"",type:"text",modelValue:f.value,"onUpdate:modelValue":a[3]||(a[3]=e=>f.value=e),dense:u.value,label:"\u578B\u865F","lazy-rules":"",rules:[e=>!!e||"\u8ACB\u8F38\u5165\u578B\u865F"]},null,8,["modelValue","dense","rules"]),n(t,{filled:"",type:"text",modelValue:c.value,"onUpdate:modelValue":a[4]||(a[4]=e=>c.value=e),dense:u.value,label:"\u5F15\u64CE"},null,8,["modelValue","dense"]),n(t,{filled:"",type:"text",modelValue:V.value,"onUpdate:modelValue":a[5]||(a[5]=e=>V.value=e),dense:u.value,label:"\u8ECA\u9577\xD7\u8ECA\u5BEC\xD7\u8ECA\u9AD8"},null,8,["modelValue","dense"]),n(t,{filled:"",type:"text",modelValue:b.value,"onUpdate:modelValue":a[6]||(a[6]=e=>b.value=e),dense:u.value,label:"\u5EA7\u9AD8"},null,8,["modelValue","dense"]),n(t,{filled:"",type:"text",modelValue:y.value,"onUpdate:modelValue":a[7]||(a[7]=e=>y.value=e),dense:u.value,label:"\u8ECA\u91CD"},null,8,["modelValue","dense"]),n(t,{filled:"",type:"text",modelValue:x.value,"onUpdate:modelValue":a[8]||(a[8]=e=>x.value=e),dense:u.value,label:"\u7E3D\u6392\u6C23\u91CF"},null,8,["modelValue","dense"]),n(t,{filled:"",type:"text",modelValue:w.value,"onUpdate:modelValue":a[9]||(a[9]=e=>w.value=e),dense:u.value,label:"\u6700\u9AD8\u99AC\u529B"},null,8,["modelValue","dense"]),n(t,{filled:"",type:"text",modelValue:S.value,"onUpdate:modelValue":a[10]||(a[10]=e=>S.value=e),dense:u.value,label:"\u6700\u5927\u626D\u529B"},null,8,["modelValue","dense"]),n(t,{filled:"",type:"text",modelValue:k.value,"onUpdate:modelValue":a[11]||(a[11]=e=>k.value=e),dense:u.value,label:"\u524D\u61F8\u540A\u7CFB\u7D71"},null,8,["modelValue","dense"]),n(t,{filled:"",type:"text",modelValue:U.value,"onUpdate:modelValue":a[12]||(a[12]=e=>U.value=e),dense:u.value,label:"\u5F8C\u61F8\u540A\u7CFB\u7D71"},null,8,["modelValue","dense"]),n(t,{filled:"",type:"text",modelValue:Q.value,"onUpdate:modelValue":a[13]||(a[13]=e=>Q.value=e),dense:u.value,label:"\u8F2A\u80CE(\u524D)"},null,8,["modelValue","dense"]),n(t,{filled:"",type:"text",modelValue:B.value,"onUpdate:modelValue":a[14]||(a[14]=e=>B.value=e),dense:u.value,label:"\u8F2A\u80CE(\u5F8C)"},null,8,["modelValue","dense"]),n(t,{filled:"",type:"text",modelValue:T.value,"onUpdate:modelValue":a[15]||(a[15]=e=>T.value=e),dense:u.value,label:"\u524D\u715E\u8ECA\u7CFB\u7D71"},null,8,["modelValue","dense"]),n(t,{filled:"",type:"text",modelValue:C.value,"onUpdate:modelValue":a[16]||(a[16]=e=>C.value=e),dense:u.value,label:"\u5F8C\u715E\u8ECA\u7CFB\u7D71"},null,8,["modelValue","dense"]),n(t,{modelValue:g.value,"onUpdate:modelValue":a[17]||(a[17]=e=>g.value=e),filled:"",type:"textarea",dense:u.value,label:"\u8AAA\u660E","lazy-rules":"",rules:[e=>!!e||"\u8ACB\u8F38\u5165\u8AAA\u660E"]},null,8,["modelValue","dense","rules"]),n(fe,{label:"\u5206\u985E",modelValue:m.value,"onUpdate:modelValue":a[18]||(a[18]=e=>m.value=e),options:Y},null,8,["modelValue"]),n(Z,{modelValue:A.value,"onUpdate:modelValue":a[19]||(a[19]=e=>A.value=e),"raw-model-value":_.value,"onUpdate:rawModelValue":a[20]||(a[20]=e=>_.value=e),"max-files":1,"max-size":"1MB",accept:"image/jpg, image/jpeg, image/png",multiple:!1,"error-text":{type:"\u6A94\u6848\u683C\u5F0F\u932F\u8AA4",size:"\u6A94\u6848\u683C\u5F0F\u592A\u5927"},"help-text":"\u9078\u64C7\u6A94\u6848\u6216\u653E\u5230\u9019\u88E1",deletable:"",ref_key:"fileAgent",ref:N},null,8,["modelValue","raw-model-value"]),n(pe,{modelValue:p.value,"onUpdate:modelValue":a[21]||(a[21]=e=>p.value=e),label:"\u4EE5\u4E0A\u50B3"},null,8,["modelValue"]),n(ge,{class:"text-center"},{default:d(()=>[n(I,{color:"red",onClick:G},{default:d(()=>[O("\u53D6\u6D88")]),_:1}),n(I,{type:"submit",loading:r.value,color:"green"},{default:d(()=>[O("\u9001\u51FA")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(h)],64)}}};var Re=le(ke,[["__scopeId","data-v-528a7aee"]]);export{Re as default};
