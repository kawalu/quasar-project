import{Q as p,a as n}from"./QForm.7d4079a2.js";import{aD as f,u as g,r as i,m as y,n as v,p as r,d as a,z as w,Q as h,aE as Q,v as V,as as _}from"./index.c84723ec.js";import{Q as x}from"./QCard.85e95f63.js";import{Q as b}from"./QPage.fc998caa.js";import{u as k}from"./use-quasar.e3f4c4b7.js";import"./use-key-composition.bea60ce1.js";import"./use-dark.c15c2cdd.js";import"./uid.42677368.js";import"./use-form.1dec162d.js";const z={class:"text-center"},I={__name:"LoginView",setup(B){const s=k(),m=f(),c=g(),l=i(""),o=i(""),d=async u=>{try{const{data:t}=await _.post("/users/login",{account:l.value,password:o.value});c.login({token:t.result.token,account:t.result.account,email:t.result.email,like:t.result.like,role:t.result.role,avatar:t.result.avatar}),s.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u767B\u5165\u6210\u529F"}),m.push("/")}catch{s.notify({color:"red-5",textColor:"white",icon:"warning",message:"\u767B\u5165\u5931\u6557"})}};return(u,t)=>(y(),v(b,{class:"flex flex-center"},{default:r(()=>[a(x,{style:Q(V(s).screen.lt.sm?{width:"80%"}:{width:"50%"}),class:""},{default:r(()=>[a(p,{onSubmit:d,onReset:u.onReset,class:"q-gutter-md"},{default:r(()=>[a(n,{filled:"",type:"text",modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),label:"\u5E33\u865F",hint:"\u8F38\u5165\u683C\u5F0F\u6B63\u5E38","lazy-rules":"",rules:[e=>!!e||"\u5E33\u865F\u5FC5\u586B",e=>e.length>=4||"\u5E33\u865F\u592A\u77ED",e=>e.length<20||"\u5E33\u865F\u592A\u9577"]},null,8,["modelValue","rules"]),a(n,{filled:"",type:"password",modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),label:"\u5BC6\u78BC","lazy-rules":"",rules:[e=>!!e||"\u5BC6\u78BC\u5FC5\u586B",e=>e.length>=4||"\u5BC6\u78BC\u592A\u77ED",e=>e.length<20||"\u5BC6\u78BC\u592A\u9577"]},null,8,["modelValue","rules"]),w("div",z,[a(h,{label:"\u767B\u5165",type:"submit",color:"primary"})])]),_:1},8,["onReset"])]),_:1},8,["style"])]),_:1}))}};export{I as default};
