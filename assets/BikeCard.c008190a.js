import{Q as R}from"./QImg.de81929b.js";import{j as V,ay as N,az as P,r as j,c as f,aq as K,h as b,k as U,x as E,K as L,g as G,aA as J,aB as O,E as T,ar as W,u as X,l as Y,m as Z,n as p,p as S,d as y,z as g,C as I,Q as ee,D as te}from"./index.fa6d18e4.js";import{u as ae,a as oe,b as ne}from"./use-form.469b8697.js";import{b as le}from"./format.a33550d6.js";import{Q as re}from"./QCardSection.500bd4a7.js";import{Q as ie}from"./QCard.a11826cd.js";import{u as ce}from"./use-quasar.583da9de.js";var se=V({name:"QRating",props:{...N,...ae,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{slots:r,emit:v}){const{proxy:{$q:m}}=G(),x=P(e),s=oe(e),h=ne(s),n=j(0);let i={};const A=f(()=>e.readonly!==!0&&e.disable!==!0),H=f(()=>`q-rating row inline items-center q-rating--${A.value===!0?"":"non-"}editable`+(e.noDimming===!0?" q-rating--no-dimming":"")+(e.disable===!0?" disabled":"")+(e.color!==void 0&&Array.isArray(e.color)===!1?` text-${e.color}`:"")),Q=f(()=>{const o=Array.isArray(e.icon)===!0?e.icon.length:0,t=Array.isArray(e.iconSelected)===!0?e.iconSelected.length:0,l=Array.isArray(e.iconHalf)===!0?e.iconHalf.length:0,u=Array.isArray(e.color)===!0?e.color.length:0,d=Array.isArray(e.colorSelected)===!0?e.colorSelected.length:0,a=Array.isArray(e.colorHalf)===!0?e.colorHalf.length:0;return{iconLen:o,icon:o>0?e.icon[o-1]:e.icon,selIconLen:t,selIcon:t>0?e.iconSelected[t-1]:e.iconSelected,halfIconLen:l,halfIcon:l>0?e.iconHalf[t-1]:e.iconHalf,colorLen:u,color:u>0?e.color[u-1]:e.color,selColorLen:d,selColor:d>0?e.colorSelected[d-1]:e.colorSelected,halfColorLen:a,halfColor:a>0?e.colorHalf[a-1]:e.colorHalf}}),w=f(()=>{if(typeof e.iconAriaLabel=="string"){const o=e.iconAriaLabel.length!==0?`${e.iconAriaLabel} `:"";return t=>`${o}${t}`}if(Array.isArray(e.iconAriaLabel)===!0){const o=e.iconAriaLabel.length;if(o>0)return t=>e.iconAriaLabel[Math.min(t,o)-1]}return(o,t)=>`${t} ${o}`}),M=f(()=>{const o=[],t=Q.value,l=Math.ceil(e.modelValue),u=A.value===!0?0:null,d=e.iconHalf===void 0||l===e.modelValue?-1:l;for(let a=1;a<=e.max;a++){const c=n.value===0&&e.modelValue>=a||n.value>0&&n.value>=a,_=d===a&&n.value<a,C=n.value>0&&(_===!0?l:e.modelValue)>=a&&n.value<a,B=_===!0?a<=t.halfColorLen?e.colorHalf[a-1]:t.halfColor:t.selColor!==void 0&&c===!0?a<=t.selColorLen?e.colorSelected[a-1]:t.selColor:a<=t.colorLen?e.color[a-1]:t.color,F=(_===!0?a<=t.halfIconLen?e.iconHalf[a-1]:t.halfIcon:t.selIcon!==void 0&&(c===!0||C===!0)?a<=t.selIconLen?e.iconSelected[a-1]:t.selIcon:a<=t.iconLen?e.icon[a-1]:t.icon)||m.iconSet.rating.icon;o.push({name:(_===!0?a<=t.halfIconLen?e.iconHalf[a-1]:t.halfIcon:t.selIcon!==void 0&&(c===!0||C===!0)?a<=t.selIconLen?e.iconSelected[a-1]:t.selIcon:a<=t.iconLen?e.icon[a-1]:t.icon)||m.iconSet.rating.icon,attrs:{tabindex:u,role:"radio","aria-checked":e.modelValue===a?"true":"false","aria-label":w.value(a,F)},iconClass:"q-rating__icon"+(c===!0||_===!0?" q-rating__icon--active":"")+(C===!0?" q-rating__icon--exselected":"")+(n.value===a?" q-rating__icon--hovered":"")+(B!==void 0?` text-${B}`:"")})}return o}),z=f(()=>{const o={role:"radiogroup"};return e.disable===!0&&(o["aria-disabled"]="true"),e.readonly===!0&&(o["aria-readonly"]="true"),o});function k(o){if(A.value===!0){const t=le(parseInt(o,10),1,parseInt(e.max,10)),l=e.noReset!==!0&&e.modelValue===t?0:t;l!==e.modelValue&&v("update:modelValue",l),n.value=0}}function $(o){A.value===!0&&(n.value=o)}function D(o,t){switch(o.keyCode){case 13:case 32:return k(t),L(o);case 37:case 40:return i[`rt${t-1}`]&&i[`rt${t-1}`].focus(),L(o);case 39:case 38:return i[`rt${t+1}`]&&i[`rt${t+1}`].focus(),L(o)}}function q(){n.value=0}return K(()=>{i={}}),()=>{const o=[];return M.value.forEach(({iconClass:t,name:l,attrs:u},d)=>{const a=d+1;o.push(b("div",{key:a,ref:c=>{i[`rt${a}`]=c},class:"q-rating__icon-container flex flex-center",...u,onClick(){k(a)},onMouseover(){$(a)},onMouseout:q,onFocus(){$(a)},onBlur:q,onKeyup(c){D(c,a)}},U(r[`tip-${a}`],[b(E,{class:t,name:l})])))}),e.name!==void 0&&e.disable!==!0&&h(o,"push"),b("div",{class:H.value,style:x.value,...z.value},o)}}}),ue=V({name:"QCardActions",props:{...J,vertical:Boolean},setup(e,{slots:r}){const v=O(e),m=f(()=>`q-card__actions ${v.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>b("div",{class:m.value},T(r.default))}});const de={style:{background:"cover"}},fe={class:"text-h6 q-mb-xs"},me={class:"text-subtitle1"},ye={class:"text-caption text-grey"},ge={class:"row no-wrap items-center"},ve={class:"q-ml-sm"},_e={__name:"BikeCard",props:{_id:{type:String,default:()=>""},category:{type:String,default:()=>""},description:{type:String,default:()=>""},image:{type:String,default:()=>""},name:{type:String,default:()=>""},model:{type:String,default:()=>""},sell:{type:Boolean,default:()=>!0}},setup(e){const r=e,v=ce(),m=X(),x=async()=>{try{const{data:s}=await te.post("/users/like",{product:r._id,quantity:1});m.like=s.result}catch{v.notify({color:"red-5",textColor:"white",icon:"warning",message:"\u5931\u6557"})}};return(s,h)=>{const n=Y("router-link");return Z(),p(ie,{class:"my-card",flat:"",bordered:""},{default:S(()=>[y(ue,{align:"center"},{default:S(()=>[y(re,{style:{width:"300px"}},{default:S(()=>[g("div",de,[y(R,{class:"imgHover",src:r.image,style:{width:"100%",height:"100%"}},null,8,["src"])]),y(n,{to:"/introbike/"+e._id,class:"text-primary",style:{"text-decoration":"none"}},{default:S(()=>[g("div",fe,I(r.name),1)]),_:1},8,["to"]),g("div",me,I(r.model),1),g("pre",ye,I(r.description),1),g("div",ge,[y(se,{size:"18px",modelValue:s.stars,"onUpdate:modelValue":h[0]||(h[0]=i=>s.stars=i),max:5,color:"primary"},null,8,["modelValue"])]),g("div",ve,[y(ee,{flat:"",round:"",color:"red",icon:"favorite",label:"like",onClick:x})])]),_:1})]),_:1})]),_:1})}}};var Ie=W(_e,[["__scopeId","data-v-194b80e8"]]);export{Ie as B};
